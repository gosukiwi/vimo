" [ SEARCH ]
" Highlight as you type kind of search. If a pattern contains an uppercase
" letter, match for case sensitive, otherwise, match for case-insensitive.
"
" Key bindings
"
"     <leader>sc
"       Clear the search highlight
"       NORMAL MODE
"
"     <leader>ss
"       Search text under cursor or selection in files with same filetype (eg: only Ruby files)
"       If there is no specified `filetype`, it runs on all files
"       NORMAL MODE / VISUAL MODE
"
"     <leader>sa
"       Search text under cursor or selection in All files (slow)
"       NORMAL MODE / VISUAL MODE
"

set incsearch
set hlsearch
set ignorecase
set smartcase       

" clear search higlight in normal mode
nnoremap <leader>sc :noh<return><esc>

" show next matched string at the center of the screen
nnoremap n nzz
nnoremap N Nzz

" default glob filter of files for `vimgrep`
let g:search_glob="**/*"
" by default, ignore all `/tmp` and `/temp` folders
set wildignore+=*/tmp/*,*/temp/*

" search all
vnoremap <leader>sa y:execute "noautocmd vimgrep /" . escape(@", '/') . "/j **/*"<CR>:cw<CR>
nnoremap <leader>sa yiw:execute "noautocmd vimgrep /" . escape(@", '/') . "/j **/*"<CR>:cw<CR>

" search by filetype
vnoremap <leader>ss y:execute "noautocmd vimgrep /" . escape(@", '/') . "/j " . g:search_glob<CR>:cw<CR>
nnoremap <leader>ss yiw:execute "noautocmd vimgrep /" . escape(@", '/') . "/j " . g:search_glob<CR>:cw<CR>

" vim:ft=vim
